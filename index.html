<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üé∞ Waluigi‚Äôs Casino üé∞</title>

<style>
/* RESET */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* BODY */
body {
  background: radial-gradient(circle at center, #1a0029 0%, #0a0012 100%);
  color: white;
  font-family: 'Orbitron', sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  overflow-x: hidden;
}

/* HEADER */
header {
  text-align: center;
  margin-bottom: 20px;
}

h1 {
  font-size: 3rem;
  color: #b517f0;
  text-shadow: 0 0 15px #b517f0, 0 0 30px #ff00ff;
  animation: pulse 2s infinite alternate;
}

h2 {
  font-size: 1rem;
  color: #FFD700;
  text-shadow: 0 0 10px #FFD700;
}

@keyframes pulse {
  from { text-shadow: 0 0 10px #b517f0; }
  to { text-shadow: 0 0 30px #b517f0; }
}

/* GAME CONTAINER */
.container {
  display: none;
  flex-direction: column;
  align-items: center;
  background: rgba(0, 0, 0, 0.4);
  border: 2px solid #b517f0;
  border-radius: 20px;
  padding: 20px;
  width: 90%;
  max-width: 900px;
  box-shadow: 0 0 30px #b517f0;
}

/* TEXT + BUTTONS */
.balance {
  font-size: 1.5rem;
  color: #00FF9D;
  text-shadow: 0 0 10px #00FF9D;
  margin-bottom: 20px;
}

.columns {
  display: flex;
  justify-content: space-around;
  width: 100%;
  flex-wrap: wrap;
}

.column {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 10px;
}

.cards {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}

.card {
  border: 1px solid #FFD700;
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.1);
  padding: 10px;
  margin: 5px;
  font-size: 1.5rem;
  text-shadow: 0 0 5px #FFD700;
  min-width: 40px;
  text-align: center;
  transition: all 0.3s ease;
  opacity: 0;
  transform: translateY(-20px);
}

.card.show {
  opacity: 1;
  transform: translateY(0);
}

.result {
  margin: 15px;
  font-size: 1.8rem;
  font-weight: bold;
  min-height: 40px;
}

.result.win {
  color: #FFD700;
  text-shadow: 0 0 15px #FFD700;
}

.result.lose {
  color: #FF0066;
  text-shadow: 0 0 15px #FF0066;
}

button {
  background: transparent;
  border: 2px solid #00CFFF;
  color: white;
  padding: 10px 25px;
  font-size: 1.2rem;
  border-radius: 25px;
  cursor: pointer;
  transition: all 0.3s ease;
  margin: 10px;
}

button:hover {
  background: #00CFFF;
  color: #0a0012;
  box-shadow: 0 0 15px #00CFFF;
}

/* RESPONSIVE */
@media (max-width: 768px) {
  h1 { font-size: 2.2rem; }
  button { font-size: 1rem; padding: 8px 18px; }
}
</style>
</head>
<body>

<header>
  <h1>üé∞ Waluigi‚Äôs Casino üé∞</h1>
  <h2>‚ÄúIt‚Äôs-a my turn to win!‚Äù</h2>
</header>

<!-- Start Screen -->
<div id="start-screen">
  <button id="play-btn">Play Game</button>
</div>

<!-- Game Container -->
<div class="container" id="game-container">
  <div class="balance">üí∞ $1500</div>

  <div class="columns">
    <div class="column">
      <h3>Player</h3>
      <div class="cards" id="player-cards"></div>
      <p id="player-total">Total: 0</p>
    </div>
    <div class="column">
      <h3>Dealer</h3>
      <div class="cards" id="dealer-cards"></div>
      <p id="dealer-total">Total: ?</p>
    </div>
  </div>

  <div class="result"></div>

  <div class="buttons">
    <button class="hit">üéØ HIT</button>
    <button class="stand">üõë STAND</button>
    <button class="play-again" style="display:none;">üîÅ Play Again</button>
  </div>
</div>

<!-- üéµ Audio -->
<audio id="bg-music" loop src="https://cdn.pixabay.com/download/audio/2022/10/25/audio_bcae960b77.mp3?filename=casino-night-124504.mp3"></audio>
<audio id="deal-sound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_4dfe9a2f16.mp3?filename=card-flip-1-98336.mp3"></audio>
<audio id="win-sound" src="https://cdn.pixabay.com/download/audio/2021/09/01/audio_68cfde7b33.mp3?filename=success-1-6297.mp3"></audio>
<audio id="lose-sound" src="https://cdn.pixabay.com/download/audio/2022/03/16/audio_b7eb40b8c9.mp3?filename=fail-144746.mp3"></audio>

<script>
/* === GAME SCRIPT === */
const suits = ['‚ô†', '‚ô•', '‚ô¶', '‚ô£'];
const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
let deck = [];
let playerHand = [];
let dealerHand = [];
let balance = 1500;
let gameOver = false;
let dealerHidden = true;
let animating = false;

// Elements
const playerCardsDiv = document.getElementById('player-cards');
const dealerCardsDiv = document.getElementById('dealer-cards');
const playerTotalP = document.getElementById('player-total');
const dealerTotalP = document.getElementById('dealer-total');
const resultDiv = document.querySelector('.result');
const balanceDiv = document.querySelector('.balance');
const hitBtn = document.querySelector('.hit');
const standBtn = document.querySelector('.stand');
const playAgainBtn = document.querySelector('.play-again');
const startScreen = document.getElementById('start-screen');
const gameContainer = document.getElementById('game-container');
const playBtn = document.getElementById('play-btn');

// Audio
const bgMusic = document.getElementById('bg-music');
const dealSound = document.getElementById('deal-sound');
const winSound = document.getElementById('win-sound');
const loseSound = document.getElementById('lose-sound');

// Utilities
function createDeck() {
  deck = [];
  for (let s of suits) for (let v of values) deck.push({ value: v, suit: s });
}

function shuffleDeck() {
  for (let i = deck.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [deck[i], deck[j]] = [deck[j], deck[i]];
  }
}

function drawCard() {
  if (deck.length === 0) {
    createDeck();
    shuffleDeck();
  }
  return deck.pop();
}

function calculateTotal(hand) {
  let total = 0, aces = 0;
  for (let c of hand) {
    if (['J','Q','K'].includes(c.value)) total += 10;
    else if (c.value === 'A') { total += 11; aces++; }
    else total += parseInt(c.value);
  }
  while (total > 21 && aces > 0) { total -= 10; aces--; }
  return total;
}

function sleep(ms) { return new Promise(r => setTimeout(r, ms)); }

async function dealCard(targetDiv, card, hide=false) {
  animating = true;
  const el = document.createElement('div');
  el.className = 'card';
  el.textContent = hide ? 'üÇ†' : `${card.value}${card.suit}`;
  targetDiv.appendChild(el);
  dealSound.currentTime = 0;
  dealSound.play().catch(()=>{});
  await sleep(300);
  el.classList.add('show');
  await sleep(100);
  animating = false;
}

function updateTotals() {
  playerTotalP.textContent = `Total: ${calculateTotal(playerHand)}`;
  if (dealerHidden) {
    let visibleTotal = calculateTotal([dealerHand[0]]);
    dealerTotalP.textContent = `Total: ${visibleTotal} + ?`;
  } else {
    dealerTotalP.textContent = `Total: ${calculateTotal(dealerHand)}`;
  }
}

async function revealDealer() {
  dealerHidden = false;
  dealerCardsDiv.innerHTML = '';
  for (let c of dealerHand) {
    await dealCard(dealerCardsDiv, c);
  }
  updateTotals();
}

function determineWinner() {
  const playerTotal = calculateTotal(playerHand);
  const dealerTotal = calculateTotal(dealerHand);

  if (playerTotal > 21) {
    resultDiv.textContent = 'You bust! You lose!';
    loseSound.currentTime = 0;
    loseSound.play().catch(()=>{});
    resultDiv.className = 'result lose';
    balance -= 100;
  } else if (dealerTotal > 21 || playerTotal > dealerTotal) {
    resultDiv.textContent = 'You win!';
    winSound.currentTime = 0;
    winSound.play().catch(()=>{});
    resultDiv.className = 'result win';
    balance += 100;
  } else if (playerTotal < dealerTotal) {
    resultDiv.textContent = 'Dealer wins!';
    loseSound.currentTime = 0;
    loseSound.play().catch(()=>{});
    resultDiv.className = 'result lose';
    balance -= 100;
  } else {
    resultDiv.textContent = 'Push!';
    resultDiv.className = 'result';
    resultDiv.style.color = '#00CFFF';
  }

  balanceDiv.textContent = `üí∞ $${balance}`;
  playAgainBtn.style.display = 'inline-block';
  gameOver = true;
}

async function dealerPlay() {
  if (animating || gameOver) return;
  hitBtn.disabled = true;
  standBtn.disabled = true;
  await revealDealer();
  while (calculateTotal(dealerHand) < 17) {
    const card = drawCard();
    dealerHand.push(card);
    await dealCard(dealerCardsDiv, card);
    updateTotals();
  }
  determineWinner();
  hitBtn.disabled = false;
  standBtn.disabled = false;
}

// Buttons
hitBtn.addEventListener('click', async () => {
  if (gameOver || animating) return;
  const card = drawCard();
  playerHand.push(card);
  await dealCard(playerCardsDiv, card);
  updateTotals();
  if (calculateTotal(playerHand) > 21) determineWinner();
});

standBtn.addEventListener('click', dealerPlay);

playAgainBtn.addEventListener('click', async () => {
  if (animating) return;
  await startRound();
});

playBtn.addEventListener('click', async () => {
  startScreen.style.display = 'none';
  gameContainer.style.display = 'flex';
  bgMusic.volume = 0.4;
  bgMusic.play().catch(()=>{});
  await startRound();
});

async function startRound() {
  createDeck();
  shuffleDeck();
  playerHand = [];
  dealerHand = [];
  dealerHidden = true;
  gameOver = false;
  resultDiv.textContent = '';
  resultDiv.className = 'result';
  resultDiv.style.color = 'white';
  playAgainBtn.style.display = 'none';
  playerCardsDiv.innerHTML = '';
  dealerCardsDiv.innerHTML = '';
  playerTotalP.textContent = 'Total: 0';
  dealerTotalP.textContent = 'Total: ?';

  let card;

  // Deal initial cards
  card = drawCard();
  playerHand.push(card);
  await dealCard(playerCardsDiv, card);

  card = drawCard();
  dealerHand.push(card);
  await dealCard(dealerCardsDiv, card);

  card = drawCard();
  playerHand.push(card);
  await dealCard(playerCardsDiv, card);

  card = drawCard();
  dealerHand.push(card);
  await dealCard(dealerCardsDiv, card, true);

  updateTotals();
}
</script>
</body>
</html>