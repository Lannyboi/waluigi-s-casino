<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üé∞ Waluigi‚Äôs Casino üé∞</title>

<style>
/* RESET */
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: 
    radial-gradient(circle at center, rgba(26,0,41,0.7) 0%, rgba(10,0,18,0.9) 100%),
    url('images/WaluigiBackground.png') no-repeat center center;
  background-size: cover;
  color: white;
  font-family: 'Orbitron', sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  overflow-x: hidden;
}

header { text-align: center; margin-bottom: 20px; }
h1 {
  font-size: 3rem;
  color: #b517f0;
  text-shadow: 0 0 15px #b517f0, 0 0 30px #ff00ff;
  animation: pulse 2s infinite alternate;
}
h2 { font-size: 1rem; color: #FFD700; text-shadow: 0 0 10px #FFD700; }

@keyframes pulse {
  from { text-shadow: 0 0 10px #b517f0; }
  to { text-shadow: 0 0 30px #b517f0; }
}

.container {
  display: none;
  flex-direction: column;
  align-items: center;
  background: rgba(0, 0, 0, 0.6);
  border: 2px solid #b517f0;
  border-radius: 20px;
  padding: 20px;
  width: 90%;
  max-width: 900px;
  box-shadow: 0 0 30px #b517f0;
}

.bet-section {
  margin-bottom: 15px;
  display: flex;
  align-items: center;
  gap: 10px;
}
#bet-amount {
  width: 80px;
  padding: 5px 10px;
  font-size: 1rem;
  border-radius: 8px;
  border: 1px solid #00CFFF;
  background: rgba(255, 255, 255, 0.1);
  color: white;
}

.balance {
  font-size: 1.5rem;
  color: #00FF9D;
  text-shadow: 0 0 10px #00FF9D;
  margin-bottom: 20px;
}

.columns {
  display: flex;
  justify-content: space-around;
  width: 100%;
  flex-wrap: wrap;
}

.column {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 10px;
}

.cards {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}

.card {
  border: 1px solid #FFD700;
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.1);
  padding: 10px;
  margin: 5px;
  font-size: 1.5rem;
  text-shadow: 0 0 5px #FFD700;
  min-width: 40px;
  text-align: center;
  opacity: 0;
  transform: translateY(-30px);
  transition: all 0.5s ease, opacity 0.5s ease;
}

.card.show { opacity: 1; transform: translateY(0); }

.result {
  margin: 15px;
  font-size: 1.8rem;
  font-weight: bold;
  min-height: 40px;
}

.result.win { color: #FFD700; text-shadow: 0 0 15px #FFD700; }
.result.lose { color: #FF0066; text-shadow: 0 0 15px #FF0066; }

button {
  background: transparent;
  border: 2px solid #00CFFF;
  color: white;
  padding: 10px 25px;
  font-size: 1.2rem;
  border-radius: 25px;
  cursor: pointer;
  transition: all 0.3s ease;
  margin: 10px;
}
button:hover {
  background: #00CFFF;
  color: #0a0012;
  box-shadow: 0 0 15px #00CFFF;
}

/* Lore Modal */
#lore-modal {
  display: none;
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0,0,0,0.85);
  color: #FFD700;
  font-family: 'Orbitron', sans-serif;
  padding: 50px 20px;
  overflow-y: auto;
  z-index: 1000;
}

#lore-modal .close-btn {
  background: #b517f0;
  border: none;
  padding: 10px 20px;
  font-size: 1.2rem;
  border-radius: 10px;
  cursor: pointer;
  margin-bottom: 20px;
  color: white;
}

#lore-modal h2 { margin-bottom: 15px; color: #FF69B4; }

@media (max-width: 768px) {
  h1 { font-size: 2.2rem; }
  button { font-size: 1rem; padding: 8px 18px; }
}
</style>
</head>
<body>

<header>
  <h1>üé∞ Waluigi‚Äôs Casino üé∞</h1>
  <h2>‚ÄúIt‚Äôs-a my turn to win!‚Äù</h2>
  <button id="lore-btn">üìú Lore</button>
</header>

<div id="start-screen">
  <button id="play-btn">Play Game</button>
</div>

<div class="container" id="game-container">
  <div class="balance">üí∞ $1500</div>

  <!-- Bet input -->
  <div class="bet-section">
    <label for="bet-amount">üí∞ Bet Amount:</label>
    <input type="number" id="bet-amount" value="100" min="1">
  </div>

  <div class="columns">
    <div class="column">
      <h3>Player</h3>
      <div class="cards" id="player-cards"></div>
      <p id="player-total">Total: 0</p>
    </div>
    <div class="column">
      <h3>Waluigi</h3>
      <div class="cards" id="dealer-cards"></div>
      <p id="dealer-total">Total: ?</p>
    </div>
  </div>

  <div class="result"></div>
  <div class="buttons">
    <button class="hit">üéØ HIT</button>
    <button class="stand">üõë STAND</button>
    <button class="play-again" style="display:none;">üîÅ Play Again</button>
  </div>
</div>

<!-- Lore Modal -->
<div id="lore-modal">
  <button class="close-btn">‚úñ Close</button>
  <h2>The Dark Lore of Waluigi‚Äôs Casino</h2>
  <p>
    In the forgotten corners of the Mushroom Kingdom, where glitches fester and shadows linger, Waluigi plotted his vengeance. A lifetime of losses had hardened him‚Äîevery tennis match, every kart race, every tournament had chipped away at his patience, and every humiliation had sharpened his cunning.
  </p>
  <p>
    So he disappeared into the digital void, a place no plumber dared to tread. There, in the silent glow of corrupted data streams, he forged his own empire: a casino not of brick and mortar, but of code and chaos.
  </p>
  <p>
    The neon lights pulse with the beat of his fury. Chips are minted from his bitterness, and each deck of cards is shuffled with the precision of a mind consumed by obsession. To enter is to gamble more than coins‚Äîyou wager your pride, your nerve, your very sense of reality.
  </p>
  <p>
    Players whisper of the hidden rules, the traps encoded deep in the algorithm, and the laughter that echoes through empty servers when someone dares to win too much. They say Waluigi‚Äôs eyes watch from every shadow, calculating, waiting, and remembering every slight.
  </p>
  <p>
    And if fortune favors you enough to reach the pinnacle of his neon fortress, a distorted voice may hiss through your speakers, cold and triumphant: <br>
    <em>‚ÄúFinally‚Ä¶ my moment. Remember this face, for luck will never again leave it.‚Äù</em>
  </p>
  <p>Few leave unchanged. Fewer leave at all.</p>
</div>

<script>
// LORE BUTTON
const loreBtn = document.getElementById('lore-btn');
const loreModal = document.getElementById('lore-modal');
const closeLoreBtn = loreModal.querySelector('.close-btn');

loreBtn.addEventListener('click', () => { loreModal.style.display = 'block'; });
closeLoreBtn.addEventListener('click', () => { loreModal.style.display = 'none'; });
window.addEventListener('click', e => { if(e.target==loreModal) loreModal.style.display='none'; });

// GAME SCRIPT
const suits = ['‚ô†','‚ô•','‚ô¶','‚ô£'];
const values = ['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
let deck=[], playerHand=[], dealerHand=[];
let balance=1500, gameOver=false, dealerHidden=true, animating=false;
let currentBet=100;

const playerCardsDiv=document.getElementById('player-cards');
const dealerCardsDiv=document.getElementById('dealer-cards');
const playerTotalP=document.getElementById('player-total');
const dealerTotalP=document.getElementById('dealer-total');
const resultDiv=document.querySelector('.result');
const balanceDiv=document.querySelector('.balance');
const hitBtn=document.querySelector('.hit');
const standBtn=document.querySelector('.stand');
const playAgainBtn=document.querySelector('.play-again');
const startScreen=document.getElementById('start-screen');
const gameContainer=document.getElementById('game-container');
const playBtn=document.getElementById('play-btn');
const betInput=document.getElementById('bet-amount');

function createDeck(){ deck=[]; for(let s of suits) for(let v of values) deck.push({value:v,suit:s}); }
function shuffleDeck(){ for(let i=deck.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [deck[i],deck[j]]=[deck[j],deck[i]]; } }
function drawCard(){ if(deck.length===0){ createDeck(); shuffleDeck(); } return deck.pop(); }
function calculateTotal(hand){ let t=0, aces=0; for(let c of hand){ if(['J','Q','K'].includes(c.value)) t+=10; else if(c.value==='A'){t+=11; aces++;} else t+=parseInt(c.value);} while(t>21 && aces>0){t-=10; aces--;} return t; }
function sleep(ms){ return new Promise(r=>setTimeout(r,ms)); }

async function dealCard(targetDiv, card, hide=false){
  animating=true;
  const el=document.createElement('div');
  el.className='card';
  el.textContent=hide?'üÇ†':`${card.value}${card.suit}`;
  targetDiv.appendChild(el);
  await sleep(100);
  el.classList.add('show');
  await sleep(300);
  animating=false;
}

function updateTotals(){
  playerTotalP.textContent=`Total: ${calculateTotal(playerHand)}`;
  dealerTotalP.textContent = dealerHidden ? `Total: ${calculateTotal([dealerHand[0]])} + ?` : `Total: ${calculateTotal(dealerHand)}`;
}

async function revealDealer(){
  dealerHidden=false;
  dealerCardsDiv.innerHTML='';
  for(let c of dealerHand) await dealCard(dealerCardsDiv,c);
  updateTotals();
}

function determineWinner(){
  const pT=calculateTotal(playerHand), dT=calculateTotal(dealerHand);

  if(pT>21){ resultDiv.textContent='You bust! You lose!'; resultDiv.className='result lose'; balance-=currentBet; }
  else if(dT>21 || pT>dT){ resultDiv.textContent='You win!'; resultDiv.className='result win'; balance+=currentBet; }
  else if(pT<dT){ resultDiv.textContent='Waluigi wins!'; resultDiv.className='result lose'; balance-=currentBet; }
  else { resultDiv.textContent='Push!'; resultDiv.className='result'; resultDiv.style.color='#00CFFF'; }

  balanceDiv.textContent=`üí∞ $${balance}`;
  playAgainBtn.style.display='inline-block';
  gameOver=true;
  hitBtn.disabled=true; standBtn.disabled=true;
  betInput.disabled=false;

  if(balance >= 10000){ resultDiv.textContent='üéâ You hit $10,000! You win the casino! üéâ'; playAgainBtn.style.display='none'; }
  else if(balance<=0){ resultDiv.textContent='üíÄ You are bankrupt! Game over! üíÄ'; playAgainBtn.style.display='none'; }
}

async function dealerPlay(){ await revealDealer(); while(calculateTotal(dealerHand)<17){ let card=drawCard(); dealerHand.push(card); await dealCard(dealerCardsDiv,card); } determineWinner(); }

async function startRound(){
  currentBet = parseInt(betInput.value)||1;
  if(currentBet>balance) currentBet=balance;
  betInput.disabled=true;

  createDeck(); shuffleDeck();
  playerHand=[]; dealerHand=[]; dealerHidden=true; gameOver=false;
  resultDiv.textContent=''; resultDiv.className='result'; resultDiv.style.color='white';
  playAgainBtn.style.display='none'; playerCardsDiv.innerHTML=''; dealerCardsDiv.innerHTML='';
  playerTotalP.textContent='Total: 0'; dealerTotalP.textContent='Total: ?';
  hitBtn.disabled=false; standBtn.disabled=false;

  let card;
  card=drawCard(); playerHand.push(card); await dealCard(playerCardsDiv,card);
  card=drawCard(); dealerHand.push(card); await dealCard(dealerCardsDiv,card);
  card=drawCard(); playerHand.push(card); await dealCard(playerCardsDiv,card);
  card=drawCard(); dealerHand.push(card); await dealCard(dealerCardsDiv,card,true);

  updateTotals();
}

hitBtn.addEventListener('click', async ()=>{ if(gameOver||animating)return; let card=drawCard(); playerHand.push(card); await dealCard(playerCardsDiv,card); updateTotals(); if(calculateTotal(playerHand)>21) determineWinner(); });
standBtn.addEventListener('click', dealerPlay);
playAgainBtn.addEventListener('click', startRound);
playBtn.addEventListener('click', ()=>{ startScreen.style.display='none'; gameContainer.style.display='flex'; startRound(); });
</script>
</body>
</html>